<!DOCTYPE html>
<html lang="en">

    <head>
	<title>neurahub - mail</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='style/style.css') }}">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
	      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<script src="https://unpkg.com/feather-icons"></script>
    </head>

    <body>
	<div class="container-md p-4">
	    <div class="d-flex justify-content-center align-items-center my-5">
		<a href="/">
		    <img src="{{ url_for('static', filename='img/neurahub_logo_no_bg.png') }}" alt="Logo" height="128" class="d-inline-block align-items-center mx-auto">
		</a>
	    </div>
	    <div class="text-center">
		<h3>Conversations</h3>
		<h6>Talk, laugh and work with your friends</h6>
	    </div>
	    <div class="container-md my-3">
		<div class="d-flex align-items-center justify-content-around">
		    <h2 class="pt-1">Latest messages</h2>
		    <div>
			<a href='/send-message' class="btn btn-outline-primary mx-2">Send a message</a>
		    </div>
		</div>
		<hr>
	    </div>
	    {% if posts %}
	    <div class="row row-cols-1 row-cols-md-2 g-4">
		{% for post in posts %}
		<div class="col">
		    <div class="card h-100 bordered rounded">
			<div class="card-body overflow-auto shadow px-3 py-3">
			    <strong><p class="card-text">{{ post[2] }}</p></strong>
			    <p style="font-size: 24px; font-weight:bold;" class="card-text">{{ post[0] }}</p>
			    <p style="text-align: justify;" class="card-text">{{ post[1] }}</p>
			    {% if post[3] %}
			    <img class="mx-auto d-block w-50" src="data:image;base64,{{ post[3] }}" onclick="open_image_in_new_tab('{{ post[3] }}')">
			    {% endif %}
			</div>
		    </div>
		</div>
		{% endfor %}
	    </div>
	    {% else %}
	    <div class="d-flex flex-column justify-content-center align-items-center">
		<p class="py-2"><i data-feather="frown" style="width: 36px; height: 36px;"></i></p>
		<p class="h6">You have no conversations, why don't you talk with someone?</p>
	    </div>
	    {% endif %}
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
		crossorigin="anonymous"></script>
	<script>
	    function open_image_in_new_tab(image_data){
		var new_tab = window.open();
		new_tab.document.write('<html><head><title>Post image</title></head><body><img src="data:image;base64,' + image_data + '"></body></html>');
	    }
	    
	    feather.replace();
	</script>
    </body>
</html>
